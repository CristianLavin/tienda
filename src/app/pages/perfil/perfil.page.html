<ion-header [translucent]="true">
  <ion-toolbar color="success">
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/plantas"></ion-back-button>
    </ion-buttons>
    <ion-title>Perfil de Usuario</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <ion-avatar>
    <ion-img [src]="userProfileImage"></ion-img>
  </ion-avatar>
  <ion-button (click)="takePhoto()" class="small-button" color="success">Cambiar imagen</ion-button>

  <ion-list>
    <ion-item>
      <ion-label>Nombre:</ion-label>
      <ion-text>{{ loggedInUserName }}</ion-text>
    </ion-item>
    <ion-item>
      <ion-label>Email:</ion-label>
      <ion-text>{{ loggedInUserEmail }}</ion-text>
    </ion-item>
  </ion-list>

  <form *ngIf="formularioR" [formGroup]="formularioR" (ngSubmit)="submitForm()">
    <ion-item>
      <ion-label>Nueva Contraseña:</ion-label>
      <ion-input formControlName="password" type="password"></ion-input>
    </ion-item>
    <div *ngIf="formularioR.get('password')?.hasError('required') && formularioR.get('password')?.touched"
      style="color: red;">
      La contraseña es obligatoria.
    </div>
    <div *ngIf="formularioR.get('password')?.hasError('minlength') && formularioR.get('password')?.touched"
      style="color: red;">
      La contraseña debe tener al menos 8 caracteres.
    </div>
    <div *ngIf="formularioR.get('password')?.hasError('noLetter') && formularioR.get('password')?.touched"
      style="color: red;">
      La contraseña debe contener al menos una letra.
    </div>
    <div *ngIf="formularioR.get('password')?.hasError('noNumber') && formularioR.get('password')?.touched"
      style="color: red;">
      La contraseña debe contener al menos un número.
    </div>
    <div *ngIf="formularioR.get('password')?.hasError('noSpecialCharacter') && formularioR.get('password')?.touched"
      style="color: red;">
      La contraseña debe contener al menos un carácter especial.
    </div>


    <ion-button expand="block" (click)="changePassword()" class="small-button" color="success">Cambiar
      Contraseña</ion-button>
  </form>

  <ion-button expand="block" (click)="goToHome()" class="small-button" color="success">Aceptar</ion-button>
</ion-content>